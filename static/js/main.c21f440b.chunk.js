(this["webpackJsonpsimple-gantt-timeline"]=this["webpackJsonpsimple-gantt-timeline"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(7),r=n.n(c),i=(n(12),n(2)),u=n(3),s=(n(13),n(0));var f=function(e){var t,n,a=e.previous,o=e.next;return a=null!==(t=a)&&void 0!==t?t:function(e){},o=null!==(n=o)&&void 0!==n?n:function(e){},Object(s.jsxs)("div",{className:"Slider",children:[Object(s.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),a()},children:Object(s.jsx)("i",{className:"arrow left"})}),Object(s.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),o()},children:Object(s.jsx)("i",{className:"arrow right"})})]})};n(15);var l=function(e,t){var n=new Date(e),a=new Date(t);return n.setUTCHours(0),n.setUTCMinutes(0),n.setUTCSeconds(0),n.setUTCMilliseconds(0),a.setUTCHours(0),a.setUTCMinutes(0),a.setUTCSeconds(0),a.setUTCMilliseconds(0),Math.floor((a.getTime()-n.getTime())/864e5)},d=["January","February","March","April","May","June","July","August","September","October","November","December"];var h=function(e){var t=e.topOrigin,n=e.leftOrigin,a=e.maxSpread,o=e.dayWidth,c=e.dayOrigin,r=e.height,i=[],u=[],f=[],h=[];return Array(a+1).fill(0).forEach((function(e,a){a-=1;var v=new Date(c.getTime()+864e5*a);u.push(Object(s.jsx)("div",{className:"time".concat(5===v.getDay()||6===v.getDay()?" weekendday":""),style:{top:t+r,left:n+o*a,width:o,height:r},children:v.getDate()},"date-".concat(a))),0===l(v,new Date)&&(f.push(Object(s.jsx)("div",{className:"todaymarker",style:{top:t+2*r,left:n+o*a+o/2}},"todaymarker-".concat(a))),f.push(Object(s.jsx)("div",{className:"todaystrip",style:{top:t+2*r,left:n+o*a+o/2}},"todaystrip-".concat(a)))),5===v.getDay()&&h.push(Object(s.jsx)("div",{className:"weekend",style:{top:t+r,left:n+o*a,width:2*o}},"weekends-".concat(a))),0!==a&&1!==v.getDate()||i.push(Object(s.jsx)("div",{className:"month",style:{top:t,left:n+o*a,height:r},children:d[v.getMonth()]},"month-".concat(a)))})),Object(s.jsxs)("div",{className:"TimeAxis",children:[Object(s.jsx)("div",{className:"timebackground",style:{top:t+2*r,left:n}}),h,i,u,f]})},v=0,j={},b={};function p(e){var t=e.clientX,n=e.clientY,a=new CustomEvent("updateposition",{detail:{x:t,y:n}});Object.values(j).forEach((function(e,t){e.dispatchEvent(a)}))}function D(){Object.keys(b).forEach((function(e,t){b[e]=!1}))}var w=function(e){var t,n;j[e]=null!==(t=j[e])&&void 0!==t?t:new EventTarget,b[e]=null!==(n=b[e])&&void 0!==n&&n;var o=Object(a.useState)([0,0]),c=Object(u.a)(o,2),r=c[0],i=c[1],s=Object(a.useCallback)((function(t){var n=[t.detail.x,t.detail.y];b[e]&&i(n)}),[e]);return Object(a.useEffect)((function(){return 0===v&&(window.addEventListener("mousemove",p),window.addEventListener("mouseup",D)),j[e].addEventListener("updateposition",s),v+=1,function(){j[e].removeEventListener("updateposition",s),0===(v-=1)&&(window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",D))}}),[e,s]),[b[e]?r[0]:void 0,b[e]?r[1]:void 0,function(t){b[e]=t}]};n(16);var O=function(e){e.width;var t=e.height,n=e.handleKey,o=e.updateTaskHandle,c=e.isLeft,r=w(n),i=Object(u.a)(r,3),f=i[0],l=i[2];return Object(a.useEffect)((function(){o(f)}),[f,o]),Object(s.jsx)("div",{onMouseDown:function(e){l(!0)},className:"TaskHandle ".concat(c?"handleleft":"handleright"),style:{height:t}})};n(17);var m=function(e){var t=e.name,n=e.absoluteTop,o=e.absoluteLeft,c=e.width,r=e.height,i=e.paddingLeft,f=e.taskKey,l=e.updateTask,d=e.launchEditTaskObject,h=w(f),v=Object(u.a)(h,3),j=v[0],b=v[1],p=v[2];function D(e,t){l(e,t,0)}return Object(a.useEffect)((function(){l("all",j,b)}),[j,b,l]),Object(s.jsxs)("div",{className:"Task",onClick:function(e){e.preventDefault(),e.stopPropagation(),d()},style:{top:n,left:o,width:c,height:r},children:[Object(s.jsx)(O,{isLeft:!0,handleKey:"".concat(f,":left"),width:10,height:r,updateTaskHandle:function(e){return D("left",e)}}),Object(s.jsx)("div",{className:"text-container",onMouseDown:function(e){p(!0)},style:{"padding-left":i},children:t}),Object(s.jsx)(O,{handleKey:"".concat(f,":right"),width:10,height:r,updateTaskHandle:function(e){return D("right",e)}})]})};n(18);var g=function(e){var t=e.name,n=e.absoluteTop,o=e.absoluteLeft,c=e.width,r=e.height,i=e.paddingLeft,u=e.setName,f=Object(a.useRef)(null);return Object(a.useEffect)((function(){f.current.focus()})),Object(s.jsx)("div",{className:"Task EmptyTask",onClick:function(e){e.preventDefault(),e.stopPropagation()},style:{top:n,left:o,width:c,height:r,"padding-left":i},children:Object(s.jsx)("input",{className:"emptytaskname",ref:f,value:t,onChange:function(e){e.preventDefault(),e.stopPropagation(),u(e.target.value)},type:"text",placeholder:"Write a task name"})})};n(19);var y=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),o=n[0],c=n[1],r=Object(a.useCallback)((function(t){t.key===e&&c(!0)}),[e]),i=Object(a.useCallback)((function(t){t.key===e&&c(!1)}),[e]);return Object(a.useEffect)((function(){return window.addEventListener("keydown",r),window.addEventListener("keyup",i),function(){window.removeEventListener("keydown",r),window.removeEventListener("keyup",i)}}),[r,i]),o};var k=function(e){var t=e.absoluteTop,n=e.absoluteLeft,o=e.width,c=e.height,r=e.dayWidth,i=e.taskHeigh,u=e.createTask,f=y("Enter");return Object(a.useEffect)((function(){f&&u()}),[f,u]),Object(s.jsx)("div",{className:"TaskCreator",onClick:function(e){e.preventDefault(),e.stopPropagation();var t=e.nativeEvent.offsetX,n=e.nativeEvent.offsetY,a=Math.floor(t/r),o=Math.floor(n/i);u(a,o)},tabIndex:0,style:{top:t,left:n,width:o,height:c}})};n(20);var x=function(e){var t=e.taskObject,n=e.editTaskObject;return Object(s.jsx)("div",{onMouseUp:function(e){e.preventDefault(),e.stopPropagation()},className:"EditTaskPanel".concat(t.Id?" visible":""),children:t.Id&&Object(s.jsx)("input",{className:"taskname",value:t.Name,onChange:function(e){e.preventDefault(),e.stopPropagation(),n(Object(i.a)(Object(i.a)({},t),{},{Name:e.target.value}))},type:"text",placeholder:"Write a task name"})})};n(21),Math.pow(100,2);var T=function(e){e.mouseEvent;var t,n=e.fromDate,o=e.topOrigin,c=e.leftOrigin,r=e.maxSpread,f=e.dayWidth,d=e.taskHeigh,h=e.store,v=e.editStoreTask;v=null!==(t=v)&&void 0!==t?t:function(e){};var j=Object(a.useState)({}),b=Object(u.a)(j,2),p=b[0],D=b[1],w=Object(a.useState)({}),O=Object(u.a)(w,2),y=O[0],T=O[1],S=Object(a.useState)(!1),E=Object(u.a)(S,2),N=E[0],M=E[1],I=new Date(n.getTime()),C={},L={},P=[];function U(e){var t;if(y.Id===e)t=Object(i.a)({},y);else for(var n=0;n<h.length;n++)if(h[n].Id===e){t=Object(i.a)({},h[n]);break}return t}function H(e,t){for(var n=l(I,e.StartDate),a=l(e.StartDate,e.DueDate)+1,u=e.row,h=n,v=0;v<a;v++)C["".concat(h+v,":").concat(u)]=e.Id;L[e.Id]={column:h,row:u,spread:a},h+a-1>=0&&h<r&&P.push(Object(s.jsx)(t,{taskKey:"Task-".concat(e.Id),name:e.Name,absoluteTop:o+d*u,absoluteLeft:c+f*h,width:f*a,height:d,paddingLeft:-Math.min(h,0)*f,setName:function(e){return D(Object(i.a)(Object(i.a)({},p),{},{Name:e}))},updateTask:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return J.apply(void 0,[e.Id].concat(n))},launchEditTaskObject:function(){return function(e){if(W())return;var t=U(e);M(!0),T(t)}(e.Id)}},"".concat(h,"-").concat(u)))}function W(){return p.StartDate&&p.DueDate?(function(){if(p.Name&&p.StartDate&&p.DueDate){var e=Date.now().toString();v(Object(i.a)(Object(i.a)({},p),{},{Id:e}))}}(),D({}),!0):!!y.Id&&(N&&M(!1),y.Id&&y.Name&&y.StartDate&&y.DueDate&&v(Object(i.a)({},y)),T({}),!0)}function J(e,t,n,a){if(e&&t&&(n||a)){var r=U(e),u=L[e].column,s=L[e].column+L[e].spread-1,l=L[e].row;if("left"===t){var h=Math.floor((n-c-f/2)/f);if(h>s||h-u===0)return;for(var v=Math.min(h,u);v<=Math.max(h,u);v++)if(C["".concat(v,":").concat(l)]&&C["".concat(v,":").concat(l)]!==e)return;T(Object(i.a)(Object(i.a)({},r),{},{StartDate:new Date(r.StartDate.getTime()+864e5*(h-u))}))}else if("right"===t){var j=Math.floor((n-c-f/2)/f);if(j<u||j-s===0)return;for(var b=Math.min(j,s);b<=Math.max(j,s);b++)if(C["".concat(b,":").concat(l)]&&C["".concat(b,":").concat(l)]!==e)return;T(Object(i.a)(Object(i.a)({},r),{},{DueDate:new Date(r.DueDate.getTime()+864e5*(j-s))}))}else if("all"===t){var p=Math.floor((n-c)/f),D=Math.floor((a-o)/d),w=Math.floor(p-(s+u)/2);if(D<0||w+(D-l)===0)return;for(var O=u+w;O<=s+w;O++)if(C["".concat(O,":").concat(D)]&&C["".concat(O,":").concat(D)]!==e)return;T(Object(i.a)(Object(i.a)({},r),{},{StartDate:new Date(r.StartDate.getTime()+864e5*w),DueDate:new Date(r.DueDate.getTime()+864e5*w),row:D}))}}}return h.forEach((function(e,t){y.Id===e.Id?H(y,m):H(e,m)})),p.StartDate&&p.DueDate&&H(p,g),Object(s.jsxs)("div",{onMouseUp:function(){!N&&y.Id&&W()},className:"Timeline",children:[Object(s.jsx)(k,{absoluteTop:o,absoluteLeft:c,width:f*r,dayWidth:f,taskHeigh:d,createTask:function(e,t){if(!W()&&e&&t){var n=0;for(n=0;n<5&&!C["".concat(e+n,":").concat(t)];n++);0!==n&&D({Name:"",StartDate:new Date(I.getTime()+864e5*e),DueDate:new Date(I.getTime()+864e5*(e+n-1)),row:t})}}}),P,Object(s.jsx)(x,{taskObject:N?y:{},editTaskObject:function(e){T(e)}})]})};n(22);var S=function(){return Object(s.jsx)("div",{className:"Spinner"})},E=n(4),N=n.n(E),M=n(6),I="https://0zqu3fq0l8.execute-api.eu-north-1.amazonaws.com/default/gantt-timeline";function C(){return L.apply(this,arguments)}function L(){return(L=Object(M.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(I,{method:"POST",body:JSON.stringify({action:"scan"})});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(M.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(I,{method:"POST",body:JSON.stringify({action:"update",item:Object(i.a)(Object(i.a)({},t),{},{StartDate:new Date(t.StartDate).toISOString(),DueDate:new Date(t.DueDate).toISOString()})})});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=function(e){var t=[],n={};return e.forEach((function(e,a){e.StartDate=new Date(e.StartDate),e.DueDate=new Date(e.DueDate);var o=l(new Date,e.StartDate),c=l(e.StartDate,e.DueDate)+1,r=-1,u=o;if(e.row){for(var s=!1,f=0;f<c;f++)if(n["".concat(u+f,":").concat(e.row)]){s=!0;break}s||(r=e.row)}if(-1===r){var d=0,h=!1;do{h=!1;for(var v=0;v<c;v++)if(n["".concat(u+v,":").concat(d)]){h=!0;break}d+=1}while(h&&d<100);r=d-1}for(var j=0;j<c;j++)n["".concat(u+j,":").concat(r)]=e.Id;t.push(Object(i.a)(Object(i.a)({},e),{},{row:r}))})),t};new Date(Date.now()-1728e5),new Date(Date.now()+864e5),new Date(Date.now()-864e5),new Date(Date.now()+1728e5),new Date(Date.now()-864e5),new Date(Date.now()+864e5),new Date(Date.now()+864e5),new Date(Date.now()+864e5),new Date(Date.now()),new Date(Date.now()),new Date(Date.now()-864e5),new Date(Date.now()-864e5),new Date(Date.now()+216e7),new Date(Date.now()+3024e6),new Date(Date.now()-864e6),new Date(Date.now()-432e6),n(24);var H=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(null),r=Object(u.a)(c,2),l=r[0],d=r[1];Object(a.useEffect)((function(){var e=!0;return C().then((function(t){if(e){var n=t.result;console.count("... Receive Data"),console.log(n),o(U(n.Items))}})).catch((function(e){console.error(e)})),function(){e=!1}}),[]),Object(a.useEffect)((function(){if(null!==l){var e=!0;return function(e){return P.apply(this,arguments)}(l).then((function(t){if(e){var n=t.result;console.count("... Update Data"),console.log(n)}})).then((function(e){return C()})).then((function(t){if(e){var n=t.result;console.count("... Receive Data"),console.log(n),o(U(n.Items))}})).catch((function(e){console.error(e)})),function(){e=!1}}}),[l]);var v=Object(a.useState)(new Date(Date.now()-6048e5)),j=Object(u.a)(v,2),b=j[0],p=j[1],D=window.innerWidth,w=Math.floor(D/64);return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(f,{previous:function(e){return p(new Date(b.getTime()-864e5))},next:function(e){return p(new Date(b.getTime()+864e5))}}),Object(s.jsx)(h,{topOrigin:68,leftOrigin:0,maxSpread:w,dayWidth:64,dayOrigin:b,height:34}),null!==n?Object(s.jsx)(T,{fromDate:b,topOrigin:136,leftOrigin:0,maxSpread:w,dayWidth:64,taskHeigh:34,store:n,editStoreTask:function(e){e.Id&&e.Name&&e.StartDate&&e.DueDate&&(d(Object(i.a)({},e)),o(null))}}):Object(s.jsx)(S,{})]})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,26)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),c(e),r(e)}))};r.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(H,{})}),document.getElementById("root")),W()}],[[25,1,2]]]);
//# sourceMappingURL=main.c21f440b.chunk.js.map