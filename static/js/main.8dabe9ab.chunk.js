(this["webpackJsonpsimple-gantt-timeline"]=this["webpackJsonpsimple-gantt-timeline"]||[]).push([[0],{21:function(t,e,n){},22:function(t,e,n){},24:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){},33:function(t,e,n){},34:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){},38:function(t,e,n){},40:function(t,e,n){},55:function(t,e,n){},56:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n(7),r=n.n(o),c=(n(21),n(2)),i=n(3),s=(n(22),n(1));var u=function(t){var e,n,a=t.previous,o=t.next;return a=null!==(e=a)&&void 0!==e?e:function(t){},o=null!==(n=o)&&void 0!==n?n:function(t){},Object(s.jsxs)("div",{className:"Slider",children:[Object(s.jsx)("button",{onClick:function(t){t.preventDefault(),t.stopPropagation(),a()},children:Object(s.jsx)("i",{className:"arrow left"})}),Object(s.jsx)("button",{onClick:function(t){t.preventDefault(),t.stopPropagation(),o()},children:Object(s.jsx)("i",{className:"arrow right"})})]})};n(24);var l=function(t,e){var n=new Date(t),a=new Date(e);return n.setUTCHours(0),n.setUTCMinutes(0),n.setUTCSeconds(0),n.setUTCMilliseconds(0),a.setUTCHours(0),a.setUTCMinutes(0),a.setUTCSeconds(0),a.setUTCMilliseconds(0),Math.floor((a.getTime()-n.getTime())/864e5)},f=["January","February","March","April","May","June","July","August","September","October","November","December"];var d=function(t){var e=t.topOrigin,n=t.leftOrigin,a=t.maxSpread,o=t.dayWidth,r=t.dayOrigin,c=t.height,i=[],u=[],d=[],b=[];return Array(a+1).fill(0).forEach((function(t,a){a-=1;var j=new Date(r.getTime()+864e5*a);u.push(Object(s.jsx)("div",{className:"time".concat(5===j.getDay()||6===j.getDay()?" weekendday":""),style:{top:e+c,left:n+o*a,width:o,height:c},children:j.getDate()},"date-".concat(a))),0===l(j,new Date)&&(d.push(Object(s.jsx)("div",{className:"todaymarker",style:{top:e+2*c,left:n+o*a+o/2}},"todaymarker-".concat(a))),d.push(Object(s.jsx)("div",{className:"todaystrip",style:{top:e+2*c,left:n+o*a+o/2}},"todaystrip-".concat(a)))),5===j.getDay()&&b.push(Object(s.jsx)("div",{className:"weekend",style:{top:e+c,left:n+o*a,width:2*o}},"weekends-".concat(a))),0!==a&&1!==j.getDate()||i.push(Object(s.jsx)("div",{className:"month",style:{top:e,left:n+o*a,height:c},children:f[j.getMonth()]},"month-".concat(a)))})),Object(s.jsxs)("div",{className:"TimeAxis",children:[Object(s.jsx)("div",{className:"timebackground",style:{top:e+2*c,left:n}}),b,i,u,d]})},b=n(4),j=n(15),p=n.n(j),h=0,v={},O={};function m(t){var e=t.clientX,n=t.clientY,a=new CustomEvent("updateposition",{detail:{x:e,y:n}});Object.values(v).forEach((function(t,e){t.dispatchEvent(a)}))}function g(){var t=new Event("localmouseup");Object.keys(O).forEach((function(t,e){O[t]=!1})),Object.values(v).forEach((function(e,n){e.dispatchEvent(t)}))}var D=function(t){var e,n;v[t]=null!==(e=v[t])&&void 0!==e?e:new EventTarget,O[t]=null!==(n=O[t])&&void 0!==n&&n;var o=Object(a.useState)([0,0]),r=Object(i.a)(o,2),c=r[0],s=r[1],u=Object(a.useCallback)((function(e){var n=[e.detail.x,e.detail.y];O[t]&&s(n)}),[t]),l=Object(a.useCallback)((function(t){s([void 0,void 0])}),[]);return Object(a.useEffect)((function(){return 0===h&&(window.addEventListener("mousemove",m),window.addEventListener("mouseup",g)),v[t].addEventListener("updateposition",u),v[t].addEventListener("localmouseup",l),h+=1,function(){v[t].removeEventListener("updateposition",u),v[t].removeEventListener("localmouseup",l),0===(h-=1)&&(window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",g))}}),[t,u,l]),"task1:drag"===t&&console.log(O[t],c[0],c[1]),[O[t]?c[0]:void 0,O[t]?c[1]:void 0,O[t],function(e){O[t]=e}]};n(30);var w=function(t){t.width;var e=t.height,n=t.handleKey,o=t.updateTaskHandle,r=t.isLeft,c=D(n),u=Object(i.a)(c,4),l=u[0],f=u[3];return Object(a.useEffect)((function(){o(l)}),[l,o]),Object(s.jsx)("div",{onMouseDown:function(t){f(!0)},className:"TaskHandle ".concat(r?"handleleft":"handleright"),style:{height:e}})};n(31),Math.pow(100,2);var y=function(t){var e=t.originAnchor,n=t.width,a=t.height,o=t.handleMouseDown,r={width:20,height:20,bottom:a};return e&&(r.top=r.bottom,r.bottom=void 0,r.left=n-20),Object(s.jsx)("div",{onMouseDown:o,className:"DragDependency",style:r})};n(32);var x=function(t){var e=t.name,n=t.absoluteTop,o=t.absoluteLeft,r=t.width,c=t.height,u=t.paddingLeft,l=t.taskKey,f=t.updateTask,d=t.launchEditTaskObject,b=t.setIsDrag,j=t.askForDependencyIfDrag,p=D(l),h=Object(i.a)(p,4),v=h[0],O=h[1],m=h[2],g=h[3],x=Object(a.useState)(!1),k=Object(i.a)(x,2),T=k[0],S=k[1];function E(t,e){f(t,e,0)}return Object(a.useEffect)((function(){f("all",v,O)}),[v,O,f]),Object(s.jsxs)("div",{id:l,className:"Task",onClick:function(t){d()},onMouseEnter:function(t){console.log("Mouse Enter",e,"Is Listening?",m),m||S(!0)},onMouseLeave:function(t){m||S(!1)},onMouseUp:function(t){j()},style:{top:n,left:o,width:r,height:c},children:[Object(s.jsx)(w,{isLeft:!0,handleKey:"".concat(l,":left"),width:10,height:c,updateTaskHandle:function(t){return E("left",t)}}),Object(s.jsx)("div",{className:"text-container",onMouseDown:function(t){S(!1),g(!0)},style:{"padding-left":u},children:e}),T&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(y,{originAnchor:!0,width:r,height:c,handleMouseDown:function(t){b("from")}}),Object(s.jsx)(y,{width:r,height:c,handleMouseDown:function(t){b("to")}})]}),Object(s.jsx)(w,{handleKey:"".concat(l,":right"),width:10,height:c,updateTaskHandle:function(t){return E("right",t)}})]})};n(33);var k=function(t){var e=t.name,n=t.absoluteTop,o=t.absoluteLeft,r=t.width,c=t.height,i=t.paddingLeft,u=t.setName,l=Object(a.useRef)(null);return Object(a.useEffect)((function(){l.current.focus()})),Object(s.jsx)("div",{className:"Task EmptyTask",onClick:function(t){t.preventDefault(),t.stopPropagation()},style:{top:n,left:o,width:r,height:c,"padding-left":i},children:Object(s.jsx)("input",{className:"emptytaskname",ref:l,value:e,onChange:function(t){t.preventDefault(),t.stopPropagation(),u(t.target.value)},type:"text",placeholder:"Write a task name"})})};n(34);var T=function(t){var e=Object(a.useState)(!1),n=Object(i.a)(e,2),o=n[0],r=n[1],c=Object(a.useCallback)((function(e){e.key===t&&r(!0)}),[t]),s=Object(a.useCallback)((function(e){e.key===t&&r(!1)}),[t]);return Object(a.useEffect)((function(){return window.addEventListener("keydown",c),window.addEventListener("keyup",s),function(){window.removeEventListener("keydown",c),window.removeEventListener("keyup",s)}}),[c,s]),o};var S=function(t){var e=t.absoluteTop,n=t.absoluteLeft,o=t.width,r=t.height,c=t.dayWidth,i=t.taskHeigh,u=t.createTask,l=T("Enter");return Object(a.useEffect)((function(){l&&u()}),[l,u]),Object(s.jsx)("div",{className:"TaskCreator",onClick:function(t){t.preventDefault(),t.stopPropagation();var e=t.nativeEvent.offsetX,n=t.nativeEvent.offsetY,a=Math.floor(e/c),o=Math.floor(n/i);u(a,o)},tabIndex:0,style:{top:e,left:n,width:o,height:r}})};n(35);var E=function(t){var e=t.taskObject,n=t.editTaskObject;return Object(s.jsx)("div",{onMouseUp:function(t){t.preventDefault(),t.stopPropagation()},className:"EditTaskPanel".concat(e.Id?" visible":""),children:e.Id&&Object(s.jsx)("input",{className:"taskname",value:e.Name,onChange:function(t){t.preventDefault(),t.stopPropagation(),n(Object(c.a)(Object(c.a)({},e),{},{Name:t.target.value}))},type:"text",placeholder:"Write a task name"})})};n(36);var N=function(t){var e=t.positionX,n=t.positionY;return Object(s.jsx)("div",{className:"DragDependencyBox",style:{top:n,left:e}})};n(37);var I=function(t){t.mouseEvent;var e,n=t.fromDate,o=t.topOrigin,r=t.leftOrigin,u=t.maxSpread,f=t.dayWidth,d=t.taskHeigh,j=t.store,h=t.editStoreTask;h=null!==(e=h)&&void 0!==e?e:function(t){};var v=Object(a.useState)({}),O=Object(i.a)(v,2),m=O[0],g=O[1],w=Object(a.useState)({}),y=Object(i.a)(w,2),T=y[0],I=y[1],M=Object(a.useState)(!1),C=Object(i.a)(M,2),L=C[0],P=C[1],A=D("dragdependency"),U=Object(i.a)(A,4),W=U[0],H=U[1],F=U[2],J=U[3],K=Object(a.useState)({from:void 0,to:void 0}),R=Object(i.a)(K,2),X=R[0],Y=R[1],B=new Date(n.getTime()),q={},z={},V=[],_=[];function G(t,e){"from"!==e&&"to"!==e||(Y(Object(c.a)(Object(c.a)({},X),{},Object(b.a)({},e,t))),J(!0))}function Q(t){var e;if(T.Id===t)e=Object(c.a)({},T);else for(var n=0;n<j.length;n++)if(j[n].Id===t){e=Object(c.a)({},j[n]);break}return e}function Z(t,e){for(var n,a=l(B,t.StartDate),i=l(t.StartDate,t.DueDate)+1,b=t.row,j=a,v=0;v<i;v++)q["".concat(j+v,":").concat(b)]=t.Id;z[t.Id]={column:j,row:b,spread:i},j+i-1>=0&&j<u&&(V.push(Object(s.jsx)(e,{taskKey:"Task-".concat(t.Id),name:t.Name,absoluteTop:o+d*b,absoluteLeft:r+f*j,width:f*i,height:d,paddingLeft:-Math.min(j,0)*f,setName:function(t){return g(Object(c.a)(Object(c.a)({},m),{},{Name:t}))},updateTask:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return tt.apply(void 0,[t.Id].concat(n))},launchEditTaskObject:function(){return function(t){if($())return;var e=Q(t);P(!0),I(e)}(t.Id)},setIsDrag:function(e){return G(t.Id,e)},askForDependencyIfDrag:function(){return function(t){var e,n,a;X.from?(e=Q(X.from),n=t):X.to&&(e=Q(t),n=X.to),e&&n&&e.Id!==n&&h(Object(c.a)(Object(c.a)({},e),{},{linkedTo:(null!==(a=e.linkedTo)&&void 0!==a?a:new Set).add(n)})),Y({from:void 0,to:void 0})}(t.Id)}},"".concat(j,"-").concat(b))),t.linkedTo&&t.Id!==T.Id&&(n=t.Id,t.linkedTo.forEach((function(t,e){t!==T.Id&&_.push(Object(s.jsx)(p.a,{start:"Task-".concat(n),end:"Task-".concat(t),curveness:.5,strokeWidth:3}))}))))}function $(){return m.StartDate&&m.DueDate?(function(){if(m.Name&&m.StartDate&&m.DueDate){var t=Date.now().toString();h(Object(c.a)(Object(c.a)({},m),{},{Id:t}))}}(),g({}),!0):!!T.Id&&(L&&P(!1),T.Id&&T.Name&&T.StartDate&&T.DueDate&&h(Object(c.a)({},T)),I({}),!0)}function tt(t,e,n,a){if(t&&e&&(n||a)){var i=Q(t),s=z[t].column,u=z[t].column+z[t].spread-1,l=z[t].row;if("left"===e){var b=Math.floor((n-r-f/2)/f);if(b>u||b-s===0)return;for(var j=Math.min(b,s);j<=Math.max(b,s);j++)if(q["".concat(j,":").concat(l)]&&q["".concat(j,":").concat(l)]!==t)return;I(Object(c.a)(Object(c.a)({},i),{},{StartDate:new Date(i.StartDate.getTime()+864e5*(b-s))}))}else if("right"===e){var p=Math.floor((n-r-f/2)/f);if(p<s||p-u===0)return;for(var h=Math.min(p,u);h<=Math.max(p,u);h++)if(q["".concat(h,":").concat(l)]&&q["".concat(h,":").concat(l)]!==t)return;I(Object(c.a)(Object(c.a)({},i),{},{DueDate:new Date(i.DueDate.getTime()+864e5*(p-u))}))}else if("all"===e){var v=Math.floor((n-r)/f),O=Math.floor((a-o)/d),m=Math.floor(v-(u+s)/2);if(O<0||m+(O-l)===0)return;for(var g=s+m;g<=u+m;g++)if(q["".concat(g,":").concat(O)]&&q["".concat(g,":").concat(O)]!==t)return;I(Object(c.a)(Object(c.a)({},i),{},{StartDate:new Date(i.StartDate.getTime()+864e5*m),DueDate:new Date(i.DueDate.getTime()+864e5*m),row:O}))}}}return j.forEach((function(t,e){T.Id===t.Id?Z(T,x):Z(t,x)})),m.StartDate&&m.DueDate&&Z(m,k),Object(s.jsxs)("div",{onMouseUp:function(){!L&&T.Id&&$()},className:"Timeline",children:[Object(s.jsx)(S,{absoluteTop:o,absoluteLeft:r,width:f*u,dayWidth:f,taskHeigh:d,createTask:function(t,e){if(!$()&&t&&e){var n=0;for(n=0;n<5&&!q["".concat(t+n,":").concat(e)];n++);0!==n&&g({Name:"",StartDate:new Date(B.getTime()+864e5*t),DueDate:new Date(B.getTime()+864e5*(t+n-1)),row:e})}}}),V,_,Object(s.jsx)(E,{taskObject:L?T:{},editTaskObject:function(t){I(t)}}),F&&Object(s.jsx)(N,{positionX:W,positionY:H})]})};n(38);var M=function(){return Object(s.jsx)("div",{className:"Spinner"})},C=n(5),L=n.n(C),P=n(6);var A=function(t){var e=[],n={};return t.forEach((function(t,a){t.StartDate=new Date(t.StartDate),t.DueDate=new Date(t.DueDate);var o=l(new Date,t.StartDate),r=l(t.StartDate,t.DueDate)+1,i=-1,s=o;if(t.row){for(var u=!1,f=0;f<r;f++)if(n["".concat(s+f,":").concat(t.row)]){u=!0;break}u||(i=t.row)}if(-1===i){var d=0,b=!1;do{b=!1;for(var j=0;j<r;j++)if(n["".concat(s+j,":").concat(d)]){b=!0;break}d+=1}while(b&&d<100);i=d-1}for(var p=0;p<r;p++)n["".concat(s+p,":").concat(i)]=t.Id;e.push(Object(c.a)(Object(c.a)({},t),{},{row:i}))})),e},U={1:{Id:"1",Name:"This is a task",StartDate:new Date(Date.now()-1728e5),DueDate:new Date(Date.now()+864e5)}};function W(){return(W=Object(P.a)(L.a.mark((function t(e){var n;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Promise((function(t,e){t({result:{Items:Object.values(U)}})})),t.next=3,n;case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(){return(H=Object(P.a)(L.a.mark((function t(e,n){var a;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new Promise((function(t,e){U[n.Id]=Object(c.a)({},n),t({result:{}})})),t.next=3,a;case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var F=n(16);n(40);var J=function(t){var e=t.registrationOptions,n=t.submitOptions,o=Object(a.useState)(),r=Object(i.a)(o,2),u=r[0],l=r[1],f=Object(a.useState)({}),d=Object(i.a)(f,2),j=d[0],p=d[1];console.log(u),console.log(j);var h=Object.entries(e).map((function(t,e){var n=Object(i.a)(t,2);return{value:n[0],label:n[1].label}}));return Object(s.jsxs)("div",{className:"RegisterStore",children:[Object(s.jsxs)("p",{children:["Connect to your database.",Object(s.jsx)("br",{})]}),Object(s.jsxs)("form",{onSubmit:function(t){t.preventDefault(),n(u.value,j)},children:[Object(s.jsx)(F.a,{value:u,onChange:function(t){l(t)},options:h}),u&&Object.entries(e[u.value].params||{}).length>0&&Object(s.jsx)("span",{className:"separationline"}),u&&Object.entries(e[u.value].params||{}).map((function(t,e){var n=Object(i.a)(t,2),a=n[0],o=n[1];return Object(s.jsxs)("div",{className:"registerinformation",children:[Object(s.jsx)("label",{className:"registerinformationlabel",htmlFor:a,children:a}),Object(s.jsx)("input",{required:!0,className:"registerinformationinput",type:o,name:a,value:j[a],onChange:function(t){return function(t,e){p(Object(c.a)(Object(c.a)({},j),{},Object(b.a)({},t,e)))}(a,t.target.value)}})]},a)})),Object(s.jsx)("input",{type:"submit",value:"Validate"})]}),Object(s.jsxs)("div",{className:"formfooter",children:[Object(s.jsx)("span",{children:"Don't have a database?"}),Object(s.jsx)("a",{href:"https://github.com/AdrKacz/simple-gantt-timeline/blob/main/aws/README.md",target:"_blank",rel:"noreferrer",children:"Create your database"})]})]})};function K(){return(K=Object(P.a)(L.a.mark((function t(e){var n;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.apiEndpoint,{method:"POST",body:JSON.stringify({action:"scan"})});case 2:return n=t.sent,t.next=5,n.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(){return(R=Object(P.a)(L.a.mark((function t(e,n){var a;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.apiEndpoint,{method:"POST",body:JSON.stringify({action:"update",item:Object(c.a)(Object(c.a)({},n),{},{StartDate:new Date(n.StartDate).toISOString(),DueDate:new Date(n.DueDate).toISOString()})})});case 2:return a=t.sent,t.next=5,a.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var X={aws:{fetch:function(t){return K.apply(this,arguments)},update:function(t,e){return R.apply(this,arguments)}},local:{fetch:function(t){return W.apply(this,arguments)},update:function(t,e){return H.apply(this,arguments)}}},Y={aws:{params:{apiEndpoint:"url"},label:"AWS"},local:{params:{},label:"Local (your work won't be saved)"}};var B=function(){var t=Object(a.useState)({}),e=Object(i.a)(t,2),n=e[0],o=e[1],r=Object(a.useState)(null),u=Object(i.a)(r,2),l=u[0],f=u[1],d=Object(a.useState)(null),b=Object(i.a)(d,2),j=b[0],p=b[1];return Object(a.useEffect)((function(){if(n.storeType){var t=!0;return X[n.storeType].fetch(n).then((function(e){if(t){var n=e.result;f(A(n.Items))}})).catch((function(t){console.error(t)})),function(){t=!1}}}),[n]),Object(a.useEffect)((function(){if(n.storeType&&null!==j){var t=!0;return X[n.storeType].update(n,j).then((function(t){})).then((function(t){return X[n.storeType].fetch(n)})).then((function(e){if(t){var n=e.result;f(A(n.Items))}})).catch((function(t){console.error(t)})),function(){t=!1}}}),[n,j]),[l,function(t){p(t),f(null)},{hasToRegister:!n.storeType,registrationComponent:Object(s.jsx)(J,{registrationOptions:Y,submitOptions:function(t,e){o(Object(c.a)({storeType:t},e))}})}]};n(55);var q=function(){var t=B(),e=Object(i.a)(t,3),n=e[0],o=e[1],r=e[2],l=Object(a.useState)(new Date(Date.now()-6048e5)),f=Object(i.a)(l,2),b=f[0],j=f[1],p=window.innerWidth,h=Math.floor(p/64);return console.log("Store is:",n),Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(u,{previous:function(t){return j(new Date(b.getTime()-864e5))},next:function(t){return j(new Date(b.getTime()+864e5))}}),Object(s.jsx)(d,{topOrigin:68,leftOrigin:0,maxSpread:h,dayWidth:64,dayOrigin:b,height:34}),null!==n?Object(s.jsx)(I,{fromDate:b,topOrigin:136,leftOrigin:0,maxSpread:h,dayWidth:64,taskHeigh:34,store:n,editStoreTask:function(t){t.Id&&t.Name&&t.StartDate&&t.DueDate&&o(Object(c.a)({},t))}}):Object(s.jsx)(M,{}),r.hasToRegister&&r.registrationComponent]})},z=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(e){var n=e.getCLS,a=e.getFID,o=e.getFCP,r=e.getLCP,c=e.getTTFB;n(t),a(t),o(t),r(t),c(t)}))};r.a.render(Object(s.jsx)(q,{}),document.getElementById("root")),z()}},[[56,1,2]]]);
//# sourceMappingURL=main.8dabe9ab.chunk.js.map